---
title: 数据库学习之多租户技术
date: 2017-03-15 09:54:41
tags:
- 多租户技术
- 数据库学习
categories: 数据库学习
---


**多租户技术**(Multi-Tenancy Technology)又称多重租赁技术,用于实现如何在多用户的环境下
共用相同的系统或程序组件,并且仍可确保各用户数据的隔离性。


## 数据库的多租户隔离技术

距离的多租户隔离技术有很多种,数据库通常有如下三种。

### 1、独立数据库

即一个租户一个数据库。这个方案的用户数据隔离级别最高,安全性最好,但成本也最高。

#### 优点

为不同的租户提供独立的数据库,有助于简化数据模型的扩展设计,满足不同租户的独特需求,如果出现故障,
则恢复数据比较简单。

#### 缺点

增大了数据库的安装数量,随之带来维护成本和购置成本的增加。这种方案与传统的一个客户、一套数据、一套
部署类似,差别只在于软件同意部署在运营商那里。如果面对的是银行、医院等要求数据隔离级别非常高的
租户,可以选择这种模式,提高租用的定价。如果定价较低,产品走低价路线,那么这种方案一般对运营商来说是
无法承受的。


### 2、共享数据库,隔离数据构架

即多个或所有租户共享Database,但一个Tenant一个Schema

#### 优点

为安全性较高的租户提供了一定程度的逻辑数据隔离,但并不是完全隔离,每个数据库可以支持更多的租户
数量。

#### 缺点

如果出现故障,则数据恢复比较困难,因为恢复数据库将设计其他租户的数据;如果需要跨租户统计数据,
则存在一定困难


### 3、共享数据库、共享数据架构

即租户共享同一个Database同一个Schema,但在表中通过TenatID区分租户的数据。这是共享程度最高,
隔离级别最低的模式。

#### 优点

维护和购置成本最低,允许每个数据库支持的租户数量最多。

#### 缺点

隔离级别最低,安全性最低,需要在设计开发时加大安全的开发量;数据备份和恢复最困难,需要逐表逐条
备份和还原。如果希望以最少的服务器为最多的租户提供服务,并且租户接受以牺牲隔离级别换区降低成本,
那么这种方案最适合。

## 多租户方案

